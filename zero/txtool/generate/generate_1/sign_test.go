package generate_1

import (
	"encoding/json"
	"fmt"
	"testing"

	"github.com/sero-cash/go-czero-import/superzk"
	"github.com/sero-cash/go-sero/zero/txtool"
)

func TestSign(t *testing.T) {
	superzk.ZeroInit_NoCircuit()

	str := "{\"Fee\": { 		\"Currency\": \"0x000000000000000000000000000000000000000000000000000000005345524f\", 		\"Value\": \"25000000000000\" 	}, 	\"GasPrice\": 1000000000, 	\"From\": { 		\"PKr\": \"0xc200d439f05f4cd23e367abc41c505e0f79990a1eee5613cd2033dee36077511b34214e3e0786e14536d22f0b2d7e0068bec6284b626e46f59f974b21d371020948ab05d5c21304e4c4963375c24736670b63a025c709f0b6b97f04a6c1b8b2c\", 		\"SKr\": \"0x38da86e05a64c7020db02312130e832e299d96830e7455f6b62da898fc044901ea6b778dfe5206460b35fa4ac75a65fa651c3b8cb5ffcc65d38e5c0a3d0bc9010000000000000000000000000000000000000000000000000000000000000000\" 	}, 	\"Ins\": [{ 		\"SKr\": \"0x38da86e05a64c7020db02312130e832e299d96830e7455f6b62da898fc044901ea6b778dfe5206460b35fa4ac75a65fa651c3b8cb5ffcc65d38e5c0a3d0bc9010000000000000000000000000000000000000000000000000000000000000000\", 		\"Out\": { 			\"Root\": \"0xacbda0da8ea2e076cea98cadcfcea9b9ef30d71e9e71e23447c4660b21a701af\", 			\"State\": { 				\"Num\": 27, 				\"OS\": { 					\"Index\": 27, 					\"Out_Z\": { 						\"AssetCM\": \"0x65a120c5752d13d95c54ca5d6b5c9bd1e8364592db9bbe6c356bf031fb134e1d\", 						\"EInfo\": \"0x9ceb6ab7032924fa400fd7d4632001c43be58c0e15bd1cc4ea5542236ff5c1754d881670ed49038bfb1104456c94a9a9789ddfc84155328130dad573f740e7c7349db73fc54fd58a644d12d7d10604bda612329f5a7de6dca23b0cbd6d1f8d3bcaea7963abeb2553ddafc9ae1cf2603dc1e5ff68d54495e3b34fb85e7f77125c4353f3bacabd11bcd15f8728cdc79ac1b8b2208f5d9e4089075994d16b4707ef86e53646e5a483c811b688288f9d75902f3fc1abcb3f5da156120016fabbc9fd972004b5911af6502546f66f705563884c05276d2505366dfbfbc76c2f60b731\", 						\"OutCM\": \"0xcf562e05593fe13dd854898e965c1c48e1771c37d47d4c05450478202b9a9229\", 						\"PKr\": \"0x4eb56b6631d024cc17552dbcb0fc6e77712535c45d11ab3a77d21b8265a8650de9d5949aeebfed9d95312a6dd836a0af63ad3e933346e2fd4457a62d6611caa1abfb16aaceca9f0294098c3da5c1ad98e4547dbb231f3fb35ea2612304346a26\", 						\"Proof\": \"0x0275bbb58f987e83c7a79011c14ec912a2182be5fb2e9ccde68e3bf89ac958d51a0bc59fb7027af5fc3910c8f0cf73072d6cdc07c57cbe16a02660d242e25ec8236bb432e3c49dfea53806455cc4d1e1746ed375ce4cdf7cf4e12fb45ee8059cc90702e9defdfe4503d26635ee721a56b03f3007ec75d58ba5001b0e930abc8fa9701a\", 						\"RPK\": \"0x656bb81ae23744ac1a116199f04e6b75c682091ed9420486dec2ed878e3ef649\" 					}, 					\"RootCM\": \"0x94a071e50910d17edd71a23ca25abcf7e47469bb5db91819d8e4723063482d1f\" 				}, 				\"TxHash\": \"0x9241485f953363d7a6a0a063d56865fde2b0e02c0d1fdb45b8a64abdf0c0335a\" 			} 		}, 		\"Witness\": { 			\"Pos\": \"0x1b\", 			\"Paths\": [\"0xfba3b6e451c523123464221d568a7ec4b9b6b985b410270eb7c594d03c1e711e\", \"0x9f23b2ee3f6c2aec029353580f426cc70b8a44172e4daab14e95bc491b2ccaa5\", \"0x04e768d399464087f2cbaef21e21967a2e0483ecd2782b300fa1ebbf2d67a41b\", \"0xceb5d6d1d8864d1eb9b7ffe7e87276e01c64a426f9fb7b2448643e68c38d011a\", \"0x3ab41f1827c040b38a2bcd81b11d850dcaf67a4f8f4967eaaf2bdd4a89cf5291\", \"0x08c411931f7daf4dec50444df1a19874369c022ec7eb3a9f72953070d6d9630c\", \"0x6eb9d1bbaad7ae8e1ad41b2be597da14321efdbc9c7f4358e6525789d4318c8b\", \"0xa0f4e174f7fe46368a2c4ed56659c672e0187d0bca2e7619660b9e38564a958e\", \"0x19faaa87edc67b3a03edb38a7690e88bb35f90eaa38556adf4eea04f0a41329b\", \"0x78e2fae5201f6e8b5bcbb7d2cfd9a05b51ee5daac55dc1c67d5bf9496443b124\", \"0x8c473676e83787c7748e9d956e0fd2f316e00dd13771f2cee0367fcf5588f40c\", \"0x6488a7d2ae45fe1f028a2b3d140073efba82aba8db01e9c96d165d515a2b5ead\", \"0xc2baf1c827cfce1eb852561d737b454fe12c7555945ba68017fa6222c93d7f1d\", \"0xc6052c7af376fef1daf078b85913d5b147a68f4c6de75cc9e49399d62a515c92\", \"0xbddc1775065a6ee9386737303af7b9da6ad995c369706fbdcf4a7fcb8cc2cca0\", \"0xd14f617a18014f5bb594e7ca4c999354bc095a6b136a6cd3d097928fe3defd86\", \"0xcfe35d771cfcc111868b623b0885277c74b94f6f5bc544c78c66bc0b5458a524\", \"0x4163b9a6368d125edd8ee3e538f320752b0bd0f113dd79349a72fa3af06c64ab\", \"0x78cb874b15e37a66ae8eee4cf13b1e8af6e63ea72c234067a1023f1f6d989a06\", \"0x13c184ef8cd27a98857dcf2c0a21cefde8808551b4fbc18b1a62b97186662990\", \"0x93584e7b2c0ced44fca221aa0d934cedb1cddb82e0296f041b1934875d505986\", \"0x77865dd539eda3960520bee9cd3e0a8563b9a0ddc854885a1d9dee14b11b3da0\", \"0x8665f83639732248eeba9454540184cc94598e0fe73d126b6e3db31725352f28\", \"0xa322e919186a4b2f2039601db976b005e7b2968e56d75cbf71a77bbe8905292b\", \"0xb995f437374bd1e1a9eb3443bc3d7855f15b4d6ce628051332fe20a3a8cd0e9c\", \"0x75df3f7f39ed5132f0b10ca3d97487eca629128ad37d4e6b5ba391ece4f4702c\", \"0xf59c191e25659b57738ef22ede3d6113091d0425f40ec862de14bf1149fb382e\", \"0xa9588c6ec3513da0ecfdb7967fcf6711ca3566e5ae1b8b60bcc7d54a123f2a07\", \"0x3edc6044a176db79bb6ffccd3f3c950cb5a56b9ba65d4243e9e03cbcf4bbe382\"], 			\"Anchor\": \"0x10b0172229d21e581cde801ad258b6456ca5ceaddec81dba233dc4adb5724eaf\" 		} 	}], 	\"Outs\": [{ 		\"PKr\": \"0xa8e68b2b7398c188fa431ecf89ce51aa0646c7cc6656cb02de7ee44cc73eec084ea84b8185cfd99d3e5cdb76171a108a35aa858e710dd824175b7f9c35e3f2286ae0e1b5980e64711352822720d083b16472c4cf2226535457cab5b45491f0d8\", 		\"Asset\": { 			\"Tkn\": { 				\"Currency\": \"0x000000000000000000000000000000000000000000000000000000005345524f\", 				\"Value\": \"1\" 			} 		}, 		\"Memo\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" 	}, { 		\"PKr\": \"0xc200d439f05f4cd23e367abc41c505e0f79990a1eee5613cd2033dee36077511b34214e3e0786e14536d22f0b2d7e0068bec6284b626e46f59f974b21d371020948ab05d5c21304e4c4963375c24736670b63a025c709f0b6b97f04a6c1b8b2c\", 		\"Asset\": { 			\"Tkn\": { 				\"Currency\": \"0x000000000000000000000000000000000000000000000000000000005345524f\", 				\"Value\": \"7999974999999999999\" 			} 		}, 		\"Memo\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" 	}], 	\"Gas\": 25000 }"
	param := &txtool.GTxParam{}
	json.Unmarshal([]byte(str), param)
	z := true
	param.Z = &z
	ctx, e := SignTx(param)
	fmt.Println(e)
	bytes, _ := json.Marshal(ctx.Tx())
	fmt.Println(string(bytes))
	tx := ctx.Tx()
	_, er := ProveTx(&tx, param)
	fmt.Println(er)

}
